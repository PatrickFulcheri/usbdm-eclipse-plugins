<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root SYSTEM "Menu.dtd" >
<!-- tpm1_2ch_quad.xml -->

<root xmlns:xi="http://www.w3.org/2001/XInclude">
   <page name="_instance" description="Flex timer">
      <choiceOption name="SC_CMOD" description="Clock Source"
         toolTip="Selects the clock source for the module">
         <choice value="0" name="Disabled" />
         <choice value="1" name="System clock" isDefault="true" />
         <choice value="2" name="Fixed frequency clock" />
         <choice value="3" name="External clock" />
      </choiceOption>

      <choiceOption name="SC_PS" description="Clock prescaler"
         toolTip="Selects the prescaler for the module">
         <choice value="0" name="Divide by 1" />
         <choice value="1" name="Divide by 2" />
         <choice value="2" name="Divide by 4" />
         <choice value="3" name="Divide by 8" />
         <choice value="4" name="Divide by 16" />
         <choice value="5" name="Divide by 32" />
         <choice value="6" name="Divide by 64" />
         <choice value="7" name="Divide by 128" />
      </choiceOption>

      <intOption name="PERIOD" description="Period of timer"
         toolTip="Default period of the timer"
         value="10000" min="0" max="65535" />
         
      <binaryOption name="IRQ_HANDLER" description="Handler for IRQ"
         toolTip="The interrupt handler may be a static member function or\n
         may be set by use of the setCallback() method">
         <choice value="0" name="No handler installed" />
         <choice value="1" name="Handler installed" />
      </binaryOption>

      <intOption name="IRQ_LEVEL" description="IRQ Level in NVIC [0-15]"
         toolTip="Sets the priority level used to configure the NVIC"
         value="0" min="0" max="15" />
         
      <pins/>
   </page>
   <template>
      \t//! Default value for SC register\n
      \tstatic constexpr uint32_t SC  = 
      \t    ($(IRQ_HANDLER)&lt;&lt;TPM_SC_TOIE_SHIFT)|
      \t    TPM_SC_CMOD($(SC_CMOD))|
      \t    TPM_SC_PS($(SC_PS));\n\n
      \t//! Default Timer Period\n
      \tstatic constexpr uint32_t PERIOD =  $(PERIOD);\n\n
      \t//! Default IRQ level\n
      \tstatic constexpr uint32_t irqLevel =  $(IRQ_LEVEL);\n\n
   </template>
</root>

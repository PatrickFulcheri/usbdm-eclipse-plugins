<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root SYSTEM "_menu.dtd" >
<!-- tpm1_2ch_quad.xml -->

<devicePage xmlns:xi="http://www.w3.org/2001/XInclude" name="_instance" description="Flex timer">

   <aliasOption key="/SIM/sim_sopt2_pllfllsel" constant="false" /> 
   <aliasOption key="/SIM/sim_sopt2_tpmsrc" constant="false" />
   <aliasOption key="/SIM/system_tpm_clock" />
   
   <choiceOption name="tpm_sc_cmod" description="Clock Source"
      toolTip="Selects the clock source for the module">
      <choice value="0" name="Disabled" />
      <choice value="1" name="System clock" isDefault="true" />
      <choice value="2" name="Fixed frequency clock" />
      <choice value="3" name="External clock" />
   </choiceOption>

   <choiceOption name="tpm_sc_ps" description="Clock prescaler"
      toolTip="Selects the prescaler for the module">
      <choice value="0" name="Divide by 1" />
      <choice value="1" name="Divide by 2" />
      <choice value="2" name="Divide by 4" />
      <choice value="3" name="Divide by 8" />
      <choice value="4" name="Divide by 16" />
      <choice value="5" name="Divide by 32" />
      <choice value="6" name="Divide by 64" />
      <choice value="7" name="Divide by 128" />
   </choiceOption>

   <menu name="Advanced" description="Advanced options">
      <aliasOption key="/SIM/sim_sopt9_tpm$(_instance)clksel" constant="false" optional="true"/>
      <aliasOption key="/SIM/sim_sopt9_tpm$(_instance)ch0src" constant="false" optional="true"/>
   </menu>
   
   <intOption name="period" description="Period of timer"
      toolTip="Default period of the timer"
      value="10000" min="0" max="65535" />
      
   <xi:include href="_irqOption.xml"/>   

   <projectActionList id = "tpm1_2ch_quad" >
      <copy source="Project_Headers/tpm.h"         target="Project_Headers/tpm.h"          replace="true" derived="true" />
      <copy source="Snippets/tpm-pwm-example.cpp"  target="Snippets/tpm-pwm-example.cpp"   replace="true" derived="true"/>
   </projectActionList>
         
   <template>
      \t//! Default value for SC register\n
      \tstatic constexpr uint32_t sc  = 
      \t    TPM_SC_CMOD($(tpm_sc_cmod))|
      \t    TPM_SC_PS($(tpm_sc_ps));\n\n
      
      \t//! Default Timer Period\n
      \tstatic constexpr uint32_t period =  $(period);\n\n
   </template>
      
   <pins/>
</devicePage>

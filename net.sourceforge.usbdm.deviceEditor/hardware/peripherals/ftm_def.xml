<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root SYSTEM "_menu.dtd" >
<!-- ftm_2ch_def.xml -->

<devicePage xmlns:xi="http://www.w3.org/2001/XInclude" name="_instance" description="Flex timer">
   <choiceOption name="ftm_sc_clks" description="Clock Source"
      toolTip="Selects the clock source for the module">
      <choice value="0" name="Disabled" />
      <choice value="1" name="System clock" isDefault="true" />
      <choice value="2" name="Fixed frequency clock" />
      <choice value="3" name="External clock" />
   </choiceOption>

   <choiceOption name="ftm_sc_ps" description="Clock prescaler"
      toolTip="Selects the prescaler for the module">
      <choice value="0" name="Divide by 1" />
      <choice value="1" name="Divide by 2" />
      <choice value="2" name="Divide by 4" />
      <choice value="3" name="Divide by 8" />
      <choice value="4" name="Divide by 16" />
      <choice value="5" name="Divide by 32" />
      <choice value="6" name="Divide by 64" />
      <choice value="7" name="Divide by 128" />
   </choiceOption>

   <binaryOption name="ftm_sc_cpwms" description="Center-Aligned PWM Select"
      toolTip="Selects CPWM mode\nThis mode configures the FTM to operate in Up-Down Counting mode.">
      <choice value="0" name="Left-aligned (count up)" />
      <choice value="1" name="Centre-aligned (count up-down)" />
   </binaryOption>

   <binaryOption name="ftm_sc_toie" description="Timer Overflow Interrupt Enable"
      toolTip="Enables FTM overflow interrupts.">
      <choice value="0" name="Disabled" />
      <choice value="1" name="Enabled" />
   </binaryOption>

   <intOption name="period" description="Period of timer"
      toolTip="Default period of the timer"
      value="10000" min="0" max="65535" />
      
   <xi:include href="_irqOption.xml"/>
   <projectActionList id = "ftm_2ch_def" >
      <copy source="Project_Headers/ftm.h"         target="Project_Headers/ftm.h"         replace="true" derived="true" />
      <copy source="Snippets/ftm-pwm-example.cpp"  target="Snippets/ftm-pwm-example.cpp"  replace="true" derived="true" />
   </projectActionList>
         
   <template>
      \t//! Default value for SC register\n
      \tstatic constexpr uint32_t sc  = 
      \t    FTM_SC_CPWMS($(ftm_sc_cpwms))|
      \t    FTM_SC_TOIE($(ftm_sc_toie))|
      \t    FTM_SC_CLKS($(ftm_sc_clks))|
      \t    FTM_SC_PS($(ftm_sc_ps));\n\n
      
      \t//! Default Timer Period\n
      \tstatic constexpr uint32_t period =  $(period);\n\n
   </template>

   <pins/>
</devicePage>

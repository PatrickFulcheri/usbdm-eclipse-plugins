<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USBDM: Bit-band access</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">USBDM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Bit-band access</div>  </div>
</div><!--header-->
<div class="contents">

<p>Cortex-M4 bit-band support.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Cortex-M4 bit-band support. </p>
<p>Based on Freescale Application Note AN4838 <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4838.pdf">http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4838.pdf</a></p>
<p>Assumes the location has been allocated to:</p><ul>
<li>SRAM_U (0x2000_0000-0x200F_FFFF) with bit-band alias (0x2200_0000-0x23FF_FFFF)</li>
<li>AIPS/GPIO (0x4000_0000-0x400F_FFFF) with bit-band alias (0x4200_0000-0x43FF_FFFF)</li>
</ul>
<p>Most Global or Local Static variables end up in SRAM_L so are not usable<br />
Most Parameters and Local variables end up in SRAM_U</p>
<p>Examples:</p>
<p>Write a bit to a register </p><div class="fragment"><div class="line">bitbandWrite(<a class="code" href="group___g_p_i_o___peripheral__access__layer___g_r_o_u_p.html#gac485358099728ddae050db37924dd6b7">GPIOA</a>-&gt;PDOR, 3, <span class="keyword">true</span>); <span class="comment">// Set bit # 3 of port</span></div></div><!-- fragment --><p>Set bit of register </p><div class="fragment"><div class="line">bitbandSet(<a class="code" href="group___s_i_m___peripheral__access__layer___g_r_o_u_p.html#ga3dd2f4c4bfb41778902b4b5350143d9e">SIM</a>-&gt;SCGC5, <a class="code" href="group___s_i_m___register___masks___g_r_o_u_p.html#gaa7a1683eaa07a5c5adcaddf4b99ed83a">SIM_SCGC5_PORTA_SHIFT</a>); <span class="comment">// Enable clock to PORTA</span></div></div><!-- fragment --><p>Assuming a local variable 'local' </p><div class="fragment"><div class="line">bitbandClear(local, 3); <span class="comment">// Clear bit 3 of local</span></div></div><!-- fragment --><p>Note: The efficiency of this operation depends greatly on whether the address is a constant or can be pre-calculated. The code will usually be quite inefficient for local variables as the required address will be calculated each time i.e. the address calculation will overwhelm any advantage of the bitband operation</p>
<p>It is probably a good idea to use a dedicated segment in SRAM_U for bit-band variables and access globally. See linker files.</p>
<p>Fixed locations accessed by casts e.g. GPIOC etc will be very efficient since the calculation is a constant expression.</p>
<p>The generated code will be very inefficient if optimization is not enabled. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 21 2017 07:45:23 for USBDM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
